# 资讯管理模块API集成说明

## 概述
资讯管理模块实现了与房源管理相同的风格和交互方式，提供了完整的增删改查功能，包括搜索、分页、批量操作等特性。

## API接口 (src/api/info.js)

### 1. 创建资讯
```javascript
infoApi.createInfo(infoData)
```
**参数说明：**
- `infocategoryid`: 资讯分类ID（整数）
- `title`: 标题
- `content`: 内容
- `publishdate`: 发布日期（YYYY-MM-DD格式）
- `publisherid`: 发布者ID（整数）
- `tagIds`: 标签ID列表（数组）

### 2. 更新资讯
```javascript
infoApi.updateInfo(infoid, infoData)
```

### 3. 删除资讯
```javascript
infoApi.deleteInfo(infoid)
```

### 4. 查询单个资讯
```javascript
infoApi.getInfoById(infoid)
```

### 5. 查询所有资讯
```javascript
infoApi.getAllInfo(params)
```
**查询参数：**
- `page`: 页码
- `size`: 每页大小
- `search`: 搜索关键词
- `category`: 分类筛选

### 6. 批量删除
```javascript
infoApi.batchDeleteInfo(ids)
```

### 7. 按分类筛选
```javascript
infoApi.getInfoByCategory(categoryid)
```

### 8. 搜索资讯
```javascript
infoApi.searchInfo(searchParams)
```

## 页面实现

### 主页面 (src/views/info/list/index.vue)

**主要功能：**
- 资讯列表展示（表格形式）
- 多条件搜索（标题、分类、发布者、发布时间）
- 快速分类筛选
- 批量删除操作
- 分页功能
- 资讯详情查看（弹窗）
- 编辑和删除操作

**搜索功能：**
- 资讯标题模糊搜索
- 分类下拉选择
- 发布者ID筛选
- 发布时间筛选
- 重置功能

**表格功能：**
- 多选功能（复选框）
- 资讯编号、标题、分类、内容摘要、发布者、发布时间、标签
- 操作列（编辑、删除）
- 表格加载状态

**分页组件：**
- 支持每页10、20、50、100条数据
- 页码跳转
- 数据统计显示

### 添加/编辑页面 (src/views/info/list/add.vue)

**主要功能：**
- 资讯信息编辑表单
- 表单验证
- 内容预览
- 保存草稿功能
- 发布/更新操作

**表单字段：**
- 资讯标题（必填，5-100字符，带字数统计）
- 资讯分类（必填，下拉选择）
- 发布者ID（必填，数字类型）
- 发布日期（必填，日期选择器）
- 关联标签（多选，支持折叠显示）
- 资讯内容（必填，至少50字符，多行文本，带字数统计）

**预览功能：**
- 实时预览资讯展示效果
- 显示标题、发布信息、内容、标签
- 样式与实际展示保持一致

**表单验证：**
- 必填字段验证
- 字符长度限制
- 数据类型验证
- 提交前完整性校验

## 分类配置

当前支持的资讯分类：
- 房产新闻 (ID: 1)
- 购房指南 (ID: 2)  
- 装修知识 (ID: 3)
- 政策解读 (ID: 4)
- 市场分析 (ID: 5)

## 标签系统

可用标签列表：
- 热门 (ID: 1)
- 推荐 (ID: 2)
- 新房 (ID: 3)
- 二手房 (ID: 4)
- 租房 (ID: 5)
- 投资 (ID: 6)
- 装修 (ID: 7)
- 政策 (ID: 8)
- 市场 (ID: 9)
- 指南 (ID: 10)

## 路由配置

已在 `src/routers/index.js` 中添加了以下路由：

```javascript
{
  path: 'info/list',
  component: () => import('../views/info/list/index.vue'),
  meta: { title: '资讯管理', icon: 'Document', roles: ['卖家'] },
},
{
  path: 'info/list/add',
  component: () => import('../views/info/list/add.vue'),
  meta: { title: '资讯编辑', isHidden: true, roles: ['卖家'] },
}
```

## 功能特性

### 1. 响应式设计
- 支持桌面端和移动端
- 表格在小屏幕下可横向滚动
- 搜索表单自适应布局

### 2. 用户体验优化
- 加载状态提示
- 操作确认弹窗
- 成功/失败消息提示
- 表单验证提示
- 内容预览功能

### 3. 数据处理
- 前端分页和筛选
- 内容摘要截取
- 日期格式化
- 标签映射显示

### 4. 交互一致性
- 与房源管理模块保持相同的UI风格
- 相同的操作模式和用户体验
- 统一的颜色方案和组件样式

## 使用说明

1. **访问资讯管理**：在系统菜单中点击"资讯管理"
2. **搜索资讯**：使用顶部搜索表单进行多条件查询
3. **添加资讯**：点击"添加资讯"按钮，填写表单并发布
4. **编辑资讯**：在操作列点击"编辑"按钮
5. **查看详情**：点击资讯标题查看详细信息
6. **删除资讯**：单个删除或批量删除
7. **快速筛选**：使用分类快速筛选按钮

## 注意事项

1. **权限控制**：当前仅卖家角色可访问资讯管理功能
2. **数据验证**：前端进行基本验证，后端应进行完整的数据校验
3. **错误处理**：所有API调用都包含错误处理机制
4. **性能优化**：大量数据时建议实现后端分页
5. **扩展性**：标签和分类可根据业务需求进行扩展

## 后续优化建议

1. **富文本编辑器**：为内容编辑增加富文本支持
2. **图片上传**：支持资讯配图功能
3. **草稿系统**：完善草稿保存和管理
4. **审核流程**：增加资讯发布审核机制
5. **统计分析**：增加资讯阅读量等统计功能
